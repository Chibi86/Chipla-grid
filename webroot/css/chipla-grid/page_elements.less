/**
 * CSS for both comment and forum-module to Chipla
 * Made by Rasmus Berg (c) 2015-2017
 */
#form_avatar, .commentAvatar, .postAvatar {
  max-height: @magicNumber * 3;
	overflow: hidden;
  
  .avatar { 
    width: 100%;
    max-width: @magicNumber * 3 - 6px;
    vertical-align: top;
  }
}

#form_avatar, .commentAvatar, #thread .postAvatar {
  .column(1);
  margin-left: 0;
  float: left;
}

#form_text, .commentText, .postText {
  .column(@columns - 1);
}

#postForm, #commentForm {
  .clearfix();
  
  #form_text {
    p.cf-desc { margin: 0; }
    
    .writer-name, .writer-input { display: none; }
    
    textarea{
      width: 100%;
      padding: 5px;
      margin: 0;
      font-size: 0.95em;
      line-height: 22px;
      .box-sizing();
    }
  }
}

.posts .post, #comments .comment {
  width: 100%;
  .clearfix();
 
  .commentTop, .commentContent, .commentBottom,
  .postTop, .postContent, .postBottom
  {
    float: right;
    width: 100%;
  }
  
  .commentTop, .commentBottom,
  .postTop, .postBottom
  {
    font-size: 0.8em;
    line-height: @magicNumber;
    color: @colorLighter;
  }
  
  .commentTop span, .postTop span { padding-right: 2px; }
  
  .commentContent, .postComment {
    line-height: @magicNumber;
    .font-size(0.95em);
    font-style: normal;
    font-weight: 400;
  }
}

a .voteUp, a .voteDown {
  .font-size(1em);
  margin-right: 5px;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  position: relative;
  text-decoration: none;
}

.voteUp {
  border-bottom: 6px solid @borderColorLight;
  bottom: 11px;
  
  &:hover { border-bottom-color: lighter(@borderColorLight, 35%); }
}

.voteDown {
  border-top: 6px solid @borderColorLight;
  top: 11px;

  &:hover { border-top-color: lighter(@borderColorLight, 35%); }
}

.markAnswer {
  width: 100%;
  height: @magicNumber;
  display: inline-block;
  color: @markAnswerColor;
  
  .fa { 
    font-size: 1.5em;
    line-height: @magicNumber;
  }
  
  .markAnswerText {
    height: 22px;
    width: 35px;
    font-size: 0.7em;
    line-height: 0.7em;
    display: inline-block;
    overflow: hidden;
  }
}

/**
 * CSS for comment-module to Chipla
 * Made by Rasmus Berg (c) 2015-2016
 */
 
#comments { width: @maxWidthBody; }

#commentsHeader {
  height: @magicNumber * 2;
	margin-top: @magicNumber;
  padding-bottom: @magicNumber / 2;
  .box-sizing();
  
  #commentsHeaderBorder, ul#commentsMenu li { border-bottom: 3px solid @borderColorLight; }

  ul#commentsMenu {
    clear: none;
    display: inline;
    margin: 0;
    padding: 0;
    overflow: hidden;
 
    li {
      height: @magicNumber * 1.5;
      padding-bottom: @magicNumber / 2;
      display: inline-block;
      font-weight: 600;
      .box-sizing();
      
      a{ text-decoration: none; }

      &:hover, &.active{
        border-color: @colorCommentLink;
        
        a { color: @colorCommentLink !important; }
      }
    }
  }

  #commentMenu {
    min-width: (@column-width + 20px) * 3 - 20;
    float: right;
    text-align: right;
    color: #666;
    .box-sizing();

    .speechBubble{
      width: @fontSizeBody - 4;
      height: @fontSizeBody - 4;
      padding: 0;
      margin: 0;
      border: 2px solid @borderColorLight;
      .border-radius(5px 5px 0 5px);
      display: inline-block;
      position: relative;
      top: 1px;
      background: darken(@borderColorLight, 35%);
    }
   
    .caret{
      border-top: 4px solid @borderColorLight;
      top: 14px;
    }
     
    .caretUp, .caret{
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      position: relative;
      margin-left: 3px;
    }
    
    &:hover, &.active{
      color: @colorCommentLink;
      cursor: pointer;
    
      .speechBubble{
        border-color: @colorCommentLink;
        background: darken(@colorCommentLink, 15%);
      }
      
      .caret{ border-top-color: @colorCommentLink; }
    }
    
    .caretUp, &.active .caret{
      border-bottom: 4px solid !important;
      border-top: 0;
      top: auto;
      bottom: 11px;
    }

    .caretUp{
      border-bottom-color: #C3C1C1;
    }

    .caretUp:hover, &.active .caret {
      border-bottom-color:  @colorCommentLink;
    }
  }

  #commentsHeaderBorder {
    margin: -3px 0 0;
    padding: 0;
  }

  #commentUnderMenu {
    min-width: (@column-width + 20px) * 3 - 20;
    border: 2px solid @colorCommentLink;
    border-top: none;
    .border-radius(0 0 5px 5px);
    padding: 5px;
    display: none;
    position: absolute;
    z-index: 99;
    .box-sizing();
    background: @bgWrapper;
    
    input[type=submit]{
      margin: (@magicNumber - 14) 0 (@magicNumber - 18);
    }
    
    input[type=text]{
      width: (@column-width + 20px) * 3 - 20 - 14;
      margin: @magicNumber / 2 - 4 0;
      .box-sizing();
    }
    
    ul{
      margin: 0;
      padding: 0;
      list-style-type: none;
    }
    
    li{
      padding: @magicNumber / 2 - 2.5;
      .box-sizing();
    }
    
    a:hover{
      color: @colorCommentLink;
      text-decoration: none;
    }
  }
}

#commentForm #form_text textarea { 
  height: @magicNumber * 4;
}

#comments {
  padding-bottom: @magicNumber - 3;
  
  .comment { padding-top: @magicNumber; }
}

.commentsLine{
  clear: both;
  border-top: 3px solid @borderColorLight;
}

/**
 * CSS for forum-module to Chipla
 * Made by Rasmus Berg (c) 2015-2017
 */
 
#forums, #threads {
  width: 100%;
  border-spacing: 0;
  border-collapse: separate;
  
  td {
    height: (@magicNumber * 2 -1px);
    border-bottom: 1px solid @borderColorLight;
  }
  
  .forum_icon, .forum_list_icon, .thread_icon {
    .pinned  { color: @pinnedColor; }
    .solved  { color: @markAnswerColor; }
    .locked  { color: @lockedColor; }
    .removed { color: @removedColor; }
  }
  
  .forum_info { font-style: italic; }
  
  a.fa { text-decoration: none; }
  
  span.prio_arrow {
    width: 15px;
    display: inline-block;
  }
}

#threads { margin-bottom: @magicNumber; }

@media (max-width: 299px){
  .thread_icon, .forum_icon {
    display: none;
  }
}

@media (max-width: 499px) {
  .thread_published, .forum_info, .forum_access  {
    display: none;
  }
}

@media (max-width: 649px) {
  .thread_posts, .forum_threads-posts  {
    display: none;
  }
}

@media (min-width: 650px) {
  .forum_icon      { width: 15px; }
  .forum_list_icon { width: 30px; }
  .thread_icon     { width: 45px; }
}

#postForm #form_text textarea { 
  height: @magicNumber * 5;
}

.posts {
  margin-bottom: @magicNumber - 2px;
  border-bottom: 2px solid @borderColorLight;
  
  .post {
    margin-bottom: @magicNumber - 1px;
    border-bottom: 1px solid @borderColorLight;
    .clearfix();
    
    .postGraphic {
      max-height: @magicNumber * 4;
      .column(1);
      margin-left: 0;
      overflow: hidden;
      
      .postAvatar { display: inline-block; }
    }

    &:last-of-type { 
      border-bottom: none;
      margin-bottom: 0;
    }
      
    .postBottom {
      min-width: 50%;
      min-height: @magicNumber;
    }
    
    &#thread {
      margin-bottom: @magicNumber - 2px;
      padding-bottom: @magicNumber;
      border-bottom-width: 2px;
      
      .postText { float: left; }
    }
    
    .hide-comment, .hide-comments { display: none; }
    
    .postComments {
      width: 100%;
      padding-top: @magicNumber;
      display: grid;
      float: none;
      .box-sizing();
      
      #cform {
        border-top: 1px solid @borderColorLight;
        display: none;
          
        p {
          height: (@magicNumber * 3 - 1px);
          width: 80%;
          margin: 0;
          overflow: hidden;
          display: inline-block;
          float: left;
        }
        
        textarea { 
          height: @magicNumber * 2 + (@magicNumber - 18px);
          width: 100%;
          margin: 8px 0;
        }
        
        .buttonbar {
          width: 20%;
        
          input[type=submit] {
            height: @magicNumber * 2 + (@magicNumber - 18px);
            width: 100%;
            margin: 8px 0;
            .border-radius(0 5px 5px 0);
            display: inline-block;
          }
        }
      }
      
      .comments-menu {
        width: 100%;
        padding: @magicNumber / 2 0;
        border-top: 1px solid @borderColorLight;
        .font-size(0.9em);
        line-height: @magicNumber - 1;
        display: inline-block;
      }

      .comments {
        padding-bottom: @magicNumber;
        
        .comment {
          padding: (@magicNumber / 2)  0 (@magicNumber / 2 - 1.5px) 0;
          .font-size(0.85em);
          line-height: @magicNumber;
          border-bottom: 1px solid @borderColorLight;
          display: none;
          
          &:first-of-type { 
            border-top: 1px solid @borderColorLight;
            padding-top: (@magicNumber / 2 - 1px);
          }
          
          &:nth-child(1), &:nth-child(2) { display: block !important; }
          
          .author, .date, .comment-actions { .font-size(0.8em); }
          .date, .comment-actions  { color: @colorLighter; }
        }
      }
    }
  }
}

.thread-list-title {
  padding: ((@magicNumber - 2px) / 2) 0;
  border-bottom: 2px solid @borderColorLight;
}

/**
 * CSS for blog-post and forum-modules to Chipla
 * Made by Rasmus Berg (c) 2016-2017
 */

.tags {
  width: 100%;
  clear: both;
  padding: 0;
  margin: 0;
  list-style: outside none none;
  overflow: hidden;
  
  li {
    float: left;
    
    .tag {
      background: @tagBg;
      .border-radius(3px 0 0 3px);
      display: inline-block;
      height: 26px;
      line-height: 26px;
      margin: 9px 10px 9px 0;
      padding: 0 20px 0 23px;
      position: relative;
      text-decoration: none;
      transition: color 0.2s ease 0s;
      font-weight: 600;
      color: @tagColor;
      
      &:before{
        background: @bgWrapper;
        .border-radius(10px);
        box-shadow: 0 1px hsla(0, 0%, 0%, 0.25) inset;
        content: "";
        height: 6px;
        left: 10px;
        position: absolute;
        top: 10px;
        width: 6px;
      }
      
      &:after{
        background: @bgWrapper;
        border-bottom: 13px solid transparent;
        border-left: 10px solid @tagBg;
        border-top: 13px solid transparent;
        content: "";
        position: absolute;
        right: 0;
        top: 0;
      }
      
      &:hover { 
        background: @tagHoverBg;
        
        &:after { border-left-color: @tagHoverBg; }
      }
    }
  }
}

/**
 * Responsive CSS for comment- and forum-modules to Chipla
 * Made by Rasmus Berg (c) 2017
 */
 
@media (min-width: 945px) {
  .markAnswer .markAnswerText {
    position: relative;
    top: -22px;
    left: 23px;
  }
}

@media (min-width: 501px) and (max-width: 944px) {
  .markAnswer {
    text-align: right;
    
    .markAnswer { display: none; }
  } 
}

@media (max-width: 500px) {
  #commentsMenu #commentMenu, #form_avatar { display: none !important; }
  
  #form_text, #comments .comment .commentAvatar, #comments .comment .commentText,
  .posts .post#thread .postAvatar, .posts .post .postGraphic, .posts .post .postText
  {
    .column(@columns);
    display: inline-block;
    clear: both;
    float: none;
  }

  .commentAvatar, .postAvatar, .postGraphic {
    height: @magicNumber * 2;
    overflow: hidden;
    
    .avatar { 
      height: @magicNumber * 2;
      width: auto;
    }
  }
  
  .markAnswer {
    width: auto;
    height: auto;
    display: inline;
    vertical-align: super;
    
    .fa { vertical-align: super; }
  }
}

/**
 * CSS for calender-module to Chipla
 * Made by Rasmus Berg (c) 2014-2016
 */
 
/* Standard settings */

.calender h3, .calender h2, .calender h4{
	padding: 5px 0;
	margin: 0px;
}

.calender .days, .calender .weeks, .calender .day, .calender_headers div{
	float: left;
}

.calender .calender_headers div{
	background: @calenderHeaderBg;
}

.calender .week_header{
	background: @calenderWeekHeaderBg !important;
}

.calender .week{
	background: @calenderWeekBg;
	color: #666;
}

.calender .day{
	background: @calenderDayBg;
}

.days .redDay{
	color: @calenderRedDayColor;
}

.days .weekend{
	color: @calenderWeekendColor;
}

.days .today{
	background: @calenderTodayBg;
	color: #fff;
}

.days .notThisMonth{
	background: @calenderNotThisMonthBg;
	color: @calenderNotThisMonthColor;
}

.days .day { width: 14.28% !important; }

/* 
* Special calender calenders to make your calender unique
*/

.mini_calender .month_label, .basic_calender .month_label {
  float: left;
  background: @calenderMonthLabelBg;
}

.mini_calender h4, .basic_calender h3{
  padding: 0;
  letter-spacing: 1em;
  text-align: center;
  word-wrap: break-word;
  color: @calenderMonthLabelColor;
  overflow-y: hidden;
  overflow-x: inherit;
}

/* Big calender */
.big_calender .basic_calender{
	width: 100%;
  .box-sizing();
}

@media (min-width: 963px) {
  #picture_of_month{
    width: 700px;
    height: 440px;
    margin: 0 20px @magicNumber 0;
    float: left;
    
    img{ max-width: 700px; }
  }
  
  .calender_nav { 
    float: left;
  }
  
  .mini_calender{
    max-width: 220px;
  }
  
  .last_month{
    margin-bottom: @magicNumber;
  }
  
  .basic_calender{
    .month_label{ width: 3.23%; }
    .calender_headers div{ width: 12.9%; }
    .week_header, .weeks{ width: 6.47% !important; }
    .days{ width: 90.3%; }
    
    .calender .day, .calender_headers div, .calender .week{
      @media (min-width: 891px){
        padding: 5px;
      }
      @media (max-width: 890px){
        padding: 5px 2.5px;
      }
    }
  }
}
  
@media (max-width: 962px) {
  #picture_of_month{
    width: 100%;
    margin-bottom: @magicNumber;
  }
  
  .calender_nav{ 
    width: 100%;
    margin-bottom: @magicNumber;
  }
  
  .next_month, .last_month {
    float: left;
    width: 50%;
    .box-sizing();
  }
  
  .last_month {
    padding-right: 20px;
  }
  
  .big-screen{ display: none; }
  
  .basic_calender{
    .month_label{ float: none; }
    .calender_headers div{ width: 13.14%; }
    .week_header, .weeks{ width: 8% !important; }
    .days{ width: 92%; }
    
    .calender .day, .calender_headers div, .calender .week{
      @media (min-width: 891px){
        padding: 5px;
      }
      @media (max-width: 890px){
        padding: 5px 2.5px;
      }
    }
  }
}

//.responsive-grid(35px, @magicNumber, 20, 716px, 432px, ~"#picture_of_month");

#picture_of_month {
  @media (max-width: 962px) and (min-width: 933px) {
    height: @magicNumber * 27;
  }
  @media (max-width: 932px) and (min-width: 897px) {
    height: @magicNumber * 26;
  }
  @media (max-width: 896px) and (min-width: 861px) {
    height: @magicNumber * 25;
  }
  @media (max-width: 860px) and (min-width: 825px) {
    height: @magicNumber * 24;
  }
  @media (max-width: 824px) and (min-width: 789px) {
    height: @magicNumber * 23;
  }
  @media (max-width: 788px) and (min-width: 753px) {
    height: @magicNumber * 22;
  }
  @media (max-width: 752px) and (min-width: 718px) {
    height: @magicNumber * 21;
  }
  @media (max-width: 717px) and (min-width: 682px) {
    height: @magicNumber * 20;
  }
  @media (max-width: 681px) and (min-width: 646px) {
    height: @magicNumber * 19;
  }
  @media (max-width: 645px) and (min-width: 610px) {
    height: @magicNumber * 18;
  }
  @media (max-width: 609px) and (min-width: 575px) {
    height: @magicNumber * 17;
  }
  @media (max-width: 574px) and (min-width: 539px) {
    height: @magicNumber * 16;
  }
  @media (max-width: 538px) and (min-width: 503px) {
    height: @magicNumber * 15;
  }
  @media (max-width: 502px) and (min-width: 467px) {
    height: @magicNumber * 14;
  }
  @media (max-width: 466px) and (min-width: 432px) {
    height: @magicNumber * 13;
  }
  @media (max-width: 431px) {
    max-height: @magicNumber * 12;
  }
}

@media (max-width: 478px){
  .last_month, .next_month {
    width: 100%;
  }
  
  .last_month { padding: 0 0 @magicNumber; }
}

#picture_of_month{
  padding: 0;
  
  img{
    width: 100%;
    .border-radius(5px);
  }
}

.calender_nav { overflow: hidden; }

/* Basic calender */
.basic_calender{
  
  .month_label{
    padding: 11px 7.1px;
    .box-sizing();
  }
  
  h3{ .font-size(21px); }
  
  .calender .day, .calender_headers div, .calender .week{
    padding: 5px;
  }
  
  .calender_headers strong{ display: none; }
  
  .calender_headers div{
    height: @magicNumber * 2;
    .box-sizing();
  }

  .day, .week{
    height: @magicNumber * 3;
    .box-sizing();
  }
  
  .week{
    width: 100%;
    .font-size(35px);
    text-align: center;
  }
  
  @media (min-width: 800px){
    h4 { .font-size(20px); }
  }
  @media (max-width: 799px) {
    h4 { .font-size(18px); }
  }
  @media (max-width: 729px){
    h4 { .font-size(16px); }
  }
  @media (max-width: 629px){
    h4 { display: none; }
    .calender_headers strong { display: inline; }
    .week { .font-size(30px);  }
  }
  @media (max-width: 529px){
    .week { .font-size(25px);  }
  }
  @media (max-width: 429px){
    .week { .font-size(16px);  }
  }
  
}

/* Mini calender */

.mini_calender {
  width: 100%;
  
  .month_label, .weeks, .calender_headers div { width: 11.11%; }
  
  .month_label{
    min-height: @magicNumber * 6; // Five letters height + padding
    padding: (@magicNumber / 2) 4.3px;
    overflow: hidden;
    .box-sizing();
  
    h4{
      max-height: @magicNumber * 5; // Five letters height
      padding: 0;
    }
  }
  
  .calender_headers h4 { display: none; }
  
  .calender_headers div, .week, .day{
    padding: 0 2.5px;
    text-align: center;
    overflow: hidden;
    .box-sizing();
  }
  
  .weeks, .calender_headers div{ height: @magicNumber; }
  
  .week { width: 100%;  }
  
  .days { width: 77.77%;}
}

/**
 * CSS sprite for a dice with six faces.
 */

.dices(@count: 6, @height: 0, @width: 0) /*when(@count > 0)*/{
  li.dice-@{count} { background-position: @height @width; }
  
  //.dices(@count - 1, @height + @dicesDiffHeight, @width + @dicesDiffWidth);
}
 
ul.dice {
  height: @magicNumber * 3;
  margin: 0 0 @magicNumber;
  padding: 0;
  list-style: none;
}
 
ul.dice li {
  width: @dicesWidth;
  height: @dicesHeight;
  margin-top: ((@magicNumber * 3 - @dicesHeight) / 2);
  margin-right: 4px;
  display: inline-block;
  background: @dicesBg;
  .box-sizing();
}
 
ul.dice {
  .dices(1,  -64px,   0px);
  .dices(2, -128px,   0px);
  .dices(3,  -64px, -64px);
  .dices(4, -128px, -64px);
  .dices(5,   0px,  -64px);
  .dices(6,   0px,    0px);
}

/**
 * Users multipages
 */
 
.avatar { .border-radius(5px); }

/**
 * Users sidebar
 */
 
.users-sidebar {
  border: 2px solid @borderColorLight;
  padding: @magicNumber - 2;
  
  ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    
    li:before{
      content: "\f178";
      opacity: 0;
      font-family: FontAwesome;
      font-size: 0.9em;
      margin-right: 5px;
      padding: 0;
    }
    
    li:hover:before{ opacity: 10; }
    li.no-hover:hover:before{ opacity: 0; }
  }
}

/**
 * User profile
 */
 
.users_profile {
  width: 100%;
  padding: @magicNumber / 2;
  //margin: @magicNumber / 2;
  border: 1px solid @borderColorLight;
  .box-sizing();
  
  .users_profile_info {
    font-size: 14px;
    line-height: @magicNumber;
    display: inline-block;
    padding: @magicNumber / 2 @magicNumber / 2 @magicNumber / 2 (@column-width - @gutter-width + 6px);
  }

  .users_profile_avatar {
    width: ((@column-width + @gutter-width) * 2) - 6px;
    height: @magicNumber * 7;
    padding: (@magicNumber / 2);
    border: 1px solid @borderColorLight;
    display: inline-block;
    vertical-align: top;
  }
}

/**
 * Users & content list
 */
 
.users-list, .content-list {
  width: 100%;
  
  td a.fa { text-decoration: none; }
  
  @media (max-width: 399px){
    .user_id { display: none; }
  }

  @media (max-width: 499px) {
    .user_status, .user_state {
      display: none;
    }
  }
  
  @media (max-width: 599px) {
    .user_name { display: none; }
  }

  @media (max-width: 699px) {
    .user_points  { display: none; }
  }
}

/**
 * Content edit and add styles
 */
 
.form-element-filters p:not(:first-of-type):not(.cf-desc) {
  display: inline-block;
  margin: 0 5px;
}

/**
 * CSS for Chipla Blog-posts module 
 * Made by Rasmus Berg (c) 2015-2017
 */
 
.blog-post {
  header {
    border-bottom: 1px solid @borderColorLight;
    margin-bottom: @magicNumber - 1px;
    
    h2 {
      margin-bottom: 0;
      font-weight: 600;
      
      a { text-decoration: none; }
    }
  }
  
  section {
    margin-bottom: @magicNumber;
    
    &.ingress { font-style: italic; }
  }
}

footer.bloglinks { padding-top: @magicNumber; }

/**
 * Content page
 */
 
.page-content{
  section{
    margin-bottom: @magicNumber;
    
    &.ingress{
      line-height: @magicNumber;
      font-size: 18px;
      font-weight: 600;
      font-style: italic;
    }
  }
}

.page-footer{
  margin: (@magicNumber / 2) 0;
  padding: (@magicNumber / 2 - 1) 5px;
  border: 1px solid @borderColorLight;
  background-color: @bgLight;
  .border-radius(2px);
}

/**
 * Admin, moderator or user action that needs to be confirm (and sometimes verification)
 */
 
.confirm-action{
  padding: @magicNumber - 1;
  text-align: center;
  border: 1px solid @borderColorLight;
  
  fieldset{
    padding: 0;
    margin: 0;
    border: none;
  }
}